
<div class="container mx-10">
  <h1><%= @goal.name %></h1>
  <h2><%= @goal.description %></h2>
  <h2>Tasks</h2>

  <!-- Progress Bar -->
  <div class="progress-group">
    <div class="progress">
      <div class="progress-bar" style="width: <%= @progress %>%;"></div>
    </div>
      <div class="percentage-show"><%= "#{@progress.floor}%" %></div>
  </div>

    <a href="#", data-controller="confetti", data-action="click->confetti#spray">Star Avo</a>

  <!-- Task Cards -->
  <div class="task-list">
    <% @tasks.each do |task| %>
      <div class="task-card my-3 py-3 border-top">
        <div class="tasks-space">
          <!-- Task Completion Checkbox -->
          <%= simple_form_for task, html: { data: { controller: "tasks" } } do |f| %>

            <%= f.check_box :completed, id: "task_checkbox", onchange: "this.form.submit();", label: "Completed" %>

            <%= task.description %>
            <%= link_to "Journal", new_goal_task_journal_entry_path(@goal, task), class: "btn btn-success" %>
          <% end %>
        </div>
        <%= link_to "Edit", edit_task_path(task), class: "btn btn-success" %>
        <%= link_to "Delete", task_path(task), class: "btn btn-primary", data: { turbo_method: :delete, turbo_confirm: "Are you sure?" } %>
      </div>
    <% end %>

    <%= link_to "Add Task", new_goal_task_path(@goal), class: "btn btn-primary" %>
  </div>
</div>
